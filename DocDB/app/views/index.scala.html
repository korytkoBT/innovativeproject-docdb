@(message: String)

@main("Welcome to DocDB") {


<div class="container">

<div class="jumbotron">
	<script>
			Dropzone.autoDiscover = false; var tag; var tagSecond= "#Musi"; var tagThird= "#sięZgadzać";
			if(!localStorage["tagID"]=="")
				tag = localStorage["tagID"];
			else
				tag = "#Fejm";
			if(!localStorage["tagSecond"]=="")	
				tagSecond = localStorage["tagSecond"];
			else
				tagSecond = "#Fejm";
			if(!localStorage["tagThird"]=="")	
				tagThird = localStorage["tagThird"];
			else
				tagThird = "#sięZgadzać";
			
		</script>
<h2>Search</h2>
	<div id="content1">
		<div class="input-group">
		  <input type="text" id="search" class="form-control" placeholder="Search">
		  <span class="input-group-addon glyphicon glyphicon-search"></span>
		</div>
		
		<div id="resultDiv" ng-app="searchRes" ng-controller="searchController" class="list-group">
			<a ng-repeat="result in results track by $index" href={{result.link}} class="list-group-item">


				<div class="panel panel-primary">
					<div class="panel-heading">
						<span class="badge" style="float: right;">{{result.size}}kB</span>
						<h3 class="panel-title">{{result.file}}</h3>
					</div>
					<div class="panel-body">
						<span style="float:right;" class="glyphicon glyphicon-download"></span>
						<span ng-bind-html="result.context | unsafe"></span>
					</div>
					<div class="panel-footer"><small>{{result.tags}}</small></div>
				</div>


			</a>
		</div>
	</div>
</div>


<div class="jumbotron">
	<h2>Drop files</h2>
	 
		 
				<div id="content2">
					<input type="text" class="form-control" style=" margin: 0 auto;" id="tagID" placeholder="Put Your tags here" onkeydown="checkKey('tagID');">
					<form method="POST" id="dropzone1" action="@routes.Application.upload("tag")" enctype="multipart/form-data" class="dropzone"></form>
				</div>
				<div id="content2"> 
					<input type="text" class="form-control" style="margin: 0 auto;" id="tagSecond" placeholder="Put Your tags here" onkeydown="checkKey('tagSecond');">
					<form method="POST" id="dropzone2" action="@routes.Application.upload("tagSecond")" enctype="multipart/form-data" class="dropzone"></form>
				</div>
				<div id="content2"> 
					<input type="text" class="form-control" style=" margin: 0 auto;" id="tagThird" placeholder="Put Your tags here" onkeydown="checkKey('tagThird');">
					<form method="POST" id="dropzone3" action="@routes.Application.upload("tagThird")" enctype="multipart/form-data" class="dropzone"></form>
				</div>
			 
		<!--<form method="POST" id="notagdz" class="dropzone" action="@routes.Application.upload("notag")" enctype="multipart/form-data">
		</form>-->
	 
</div>
</div>


<script>
	function checkKey(tagID){
		if (event.keyCode == 13) { 
			changeTag(tagID); 
			return false; 
			}
		}
		function changeTag(tagIDDef){	
			var tag = document.getElementById(tagIDDef).value;
			var	tagID = document.getElementById(tagIDDef);
			var text = document.createTextNode(tag);
			if(tagID.childNodes.length == 0){
				tagID.appendChild(text)
			}else{
				tagID.firstChild.nodeValue = text;
			}
			localStorage[tagIDDef] = tag;	
			location.reload();
		}
		Dropzone.options.dropzone1 = {
			dictDefaultMessage: tag,
			init: function() {
				this.on("processing", function(file) {
					this.options.url = "upload/"+tag;
				});
			}
		};
		Dropzone.options.dropzone2 = {
			dictDefaultMessage: tagSecond,
			init: function() {
				this.on("processing", function(file) {
					this.options.url = "upload/"+tagSecond;
				});
			}
		};
		Dropzone.options.dropzone3 = {
			dictDefaultMessage: tagThird,
			init: function() {
				this.on("processing", function(file) {
					this.options.url = "upload/"+tagThird;
				});
			}
		};
		Dropzone.autoDiscover = true;
		
		var commentApp = angular.module('searchRes', []);
		commentApp.filter('unsafe', function($sce) {
		return function(val) {
			return $sce.trustAsHtml(val);
		};
	});

	function searchController($scope){
		/*$scope.results=[
		{file:"a.txt", size:"3", link:"@routes.Application.getFile("a.txt")"},
		{file:"b.doc", size:"0.5", link:"@routes.Application.getFile("b.doc")"},
		{file:"c.xml", size:"6", link:"@routes.Application.getFile("c.xml")"},
		{file:"d.pdf", size:"3", link:"@routes.Application.getFile("d.pdf")"},
		];*/
	}
</script>
}
